= Markup Text
:doctype: book
:icons: font
:source-highlighter: highlight.js
:toc: left
:toclevels: 3

include::_attributes.adoc[]

{project-name} provides a BBCode-style markup parser for creating styled `Text` objects from strings.
This is a convenient alternative to building `Line` and `Span` objects manually.

== Basic Usage

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=basic-usage]
----

== Syntax Reference

=== Style Tags

Style tags use square brackets with a tag name:

[source]
----
[tagname]content[/tagname]
----

==== Modifier Tags

[cols="1,2,1",options="header"]
|===
|Tag |Effect |Aliases

|`[bold]`
|Bold text
|`[b]`

|`[italic]`
|Italic text
|`[i]`

|`[underlined]`
|Underlined text
|`[u]`

|`[dim]`
|Dimmed/faint text
|

|`[reversed]`
|Swap foreground and background
|

|`[crossed-out]`
|Strikethrough text
|`[strikethrough]`, `[s]`
|===

==== Colors

Colors can be specified the ways `ColorConverter` supports:

- Named colors: `red`, `green`, `blue`, `yellow`, `cyan`, `magenta`, `white`, `black`, `gray`, etc.
- Hex colors: `#RGB`, `#RRGGBB`
- RGB colors: `rgb(r,g,b)`
- Indexed colors: `indexed(index)`

Only named colors are treated as tags/classes; explicit colors are not possible to be styled.

=== Implicit Close

Close the most recent tag without naming it:

[source]
----
[bold]Hello[/] World
----

This is equivalent to:

[source]
----
[bold]Hello[/bold] World
----

Implicit close is useful for deeply nested tags:

[source]
----
[red][bold]Important[/][/] vs [red][bold]Important[/bold][/red]
----

=== Compound Styles

Combine multiple styles in a single tag by separating them with spaces:

[source]
----
[bold red]Error message[/]
[italic cyan]Hint text[/]
[bold underlined yellow]Warning![/]
----

All tokens in a compound style become CSS classes for targeting (see <<CSS Class Targeting>>).

=== Background Colors

Use `on` to specify a background color:

[source]
----
[white on blue]Highlighted text[/]
[black on yellow]Warning banner[/]
[bold red on white]Alert![/]
----

=== Hyperlinks

Create clickable links (in supported terminals):

[source]
----
[link=https://example.com]Click here[/link]
----

=== Escaped Brackets

Two escape mechanisms are supported for literal brackets:

==== Double Brackets

[source]
----
Use [[tag]] for markup     renders as:  Use [tag] for markup
Content with ]] closing    renders as:  Content with ] closing
----

==== Backslash Escapes

[source]
----
Use \[tag] for literal     renders as:  Use [tag] for literal
Content with \] closing    renders as:  Content with ] closing
Path: C:\\Users\\name      renders as:  Path: C:\Users\name
----

Supported backslash escapes: `\[`, `\]`, `\\`. Other sequences (like `\n`) are preserved as-is.

=== Nesting

Tags can be nested for combined effects:

[source]
----
[red]This is red and [bold]this is red and bold[/bold][/red]
----

== Custom Style Resolver

A `StyleResolver` lets you define custom tags that map to styles:

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=custom-style-resolver]
----

=== Resolver Priority

The resolver has priority over built-in styles.
This means you can redefine what built-in color names mean:

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=resolver-priority]
----

=== Merging Resolver and Compound Styles

When using compound styles with a resolver, both are merged.
Inline styles (from the compound) override the resolver's base style, similar to how CSS inline styles override class styles:

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=merging-resolver-compound]
----

== CSS Class Targeting

All tokens in a tag become CSS classes that can be targeted with stylesheets.
For compound styles, every token (except `on`) becomes a CSS class:

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=css-class-targeting]
----

This allows external CSS to target any style token:

[source,css]
----
/* Target all bold text */
.bold {
    text-style: bold;
}

/* Target all yellow text */
.yellow {
    color: #ffcc00;
}

/* Target error messages */
.error {
    color: red;
    text-style: bold;
}
----

== Unknown Tags

Tags that aren't recognized as built-in styles and aren't resolved by a custom resolver are still tracked for CSS class targeting, but have no visual effect:

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=unknown-tags]
----

== Multi-line Text

Markup can span multiple lines:

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=multi-line-text]
----

== Examples

=== Status Messages

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=status-messages]
----

=== Syntax Highlighting

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=syntax-highlighting]
----

=== Rich Notifications

[source,java]
----
include::{snippets-dir}/dev/tamboui/docs/snippets/MarkupSnippets.java[tags=rich-notifications]
----

== Summary Table

[cols="1,2,1",options="header"]
|===
|Syntax |Description |Example

|`[tag]...[/tag]`
|Explicit close
|`[bold]text[/bold]`

|`[tag]...[/]`
|Implicit close (most recent)
|`[bold]text[/]`

|`[tag1 tag2]...[/]`
|Compound styles
|`[bold red]text[/]`

|`[color on bgcolor]`
|Background color
|`[white on blue]text[/]`

|`[link=url]...[/link]`
|Hyperlink
|`[link=https://x.com]click[/link]`

|`[[` / `]]`
|Double bracket escapes
|`Use [[tag]]` -> `Use [tag]`

|`\[` / `\]` / `\\`
|Backslash escapes
|`\[tag\]` -> `[tag]`
|===

== Next Steps

* link:core-concepts.html[Core Concepts] - understand Text, Line, and Span
* link:styling.html[CSS Styling] - external stylesheets for markup classes
* link:widgets.html[Widgets Reference] - using Text with widgets
